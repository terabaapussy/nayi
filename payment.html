<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UPI Payment</title>
  </head>
  <body>
    <h2>Complete Your Payment</h2>
    <p>Total Amount: <span id="total-amount">₹0.00</span></p>

    <a id="upi-payment-link" href="#">
      <button>Pay Now via UPI</button>
    </a>

    <script>
      // Load cart from localStorage
      const cart = JSON.parse(localStorage.getItem("cart")) || [];

      if (cart.length === 0) {
        window.location.href = "/";
      } else {
        // Calculate total cost
        let totalAmount = cart.reduce(
          (sum, item) => sum + item.price * (item.quantity || 1),
          0
        );
        document.getElementById(
          "total-amount"
        ).textContent = `₹${totalAmount.toFixed(2)}`;

        // Generate UPI Payment Link
        const upiID = "paytmqr66kldw@ptys"; // Your UPI ID
        const txnID = "FMPIB" + Math.floor(Math.random() * 10000000000); // Random TXN ID
        const upiLink = `upi://pay?pa=${upiID}&pn=Merchant%20Name&tr=${txnID}&am=${totalAmount.toFixed(
          2
        )}&cu=INR&tn=Payment%20for%20Order`;

        // Set UPI link in button
        document.getElementById("upi-payment-link").href = upiLink;
      }
    </script>
  </body>
</html>
